<!--pages/social/social.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="top-nav">
    <view class="nav-left" bindtap="goBack">
      <view class="back-icon"></view>
    </view>
    <view class="nav-title">é’±å…œå…œ</view>
    <view class="nav-right">
      <view class="user-avatar test-avatar" bindtap="navigateToUserSocialProfile">
        <text class="avatar-text">{{userInfo.nickname ? userInfo.nickname.charAt(0) : 'ğŸ‘¤'}}</text>
      </view>
      <view class="notification-icon" bindtap="showNotifications">
        <view class="bell-icon"></view>
      </view>
    </view>
  </view>

  <!-- æµ‹è¯•æŒ‰é’® -->
  <view class="test-section">
    <view class="test-btn" bindtap="testWalletDetail">
      <text class="test-text">ğŸ§ª æµ‹è¯•åˆ«äººé’±åŒ…è¯¦æƒ…é¡µ</text>
    </view>
    
    <!-- æµ‹è¯•é’±åŒ…å¡ç‰‡ -->
    <view class="test-wallet-card" bindtap="navigateToWalletDetail" data-wallet-id="1001">
      <view class="test-wallet-bg" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);">
        <text class="test-wallet-title">ğŸ§ª æµ‹è¯•é’±åŒ… - å®å„¿çš„é”¦é²¤å°å²›</text>
        <text class="test-wallet-desc">ç‚¹å‡»è¿›å…¥åˆ«äººçš„é’±åŒ…è¯¦æƒ…é¡µ</text>
        <view class="test-wallet-amount">Â¥2221.21</view>
      </view>
    </view>
  </view>

  <!-- åŠ¨æ€åˆ—è¡¨ -->
  <scroll-view class="posts-scroll" scroll-y="true" bindscrolltolower="loadMore">
    <view wx:if="{{posts.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ’¬</text>
      <text class="empty-text">è¿˜æ²¡æœ‰åŠ¨æ€ï¼Œå¿«æ¥åˆ†äº«ä½ çš„ç†è´¢å¿ƒå¾—å§ï¼</text>
    </view>

    <view wx:for="{{posts}}" wx:key="id" class="post-card" 
          bindtap="navigateToWalletDetail" 
          data-post-id="{{item.id}}" 
          data-wallet-id="{{item.walletId || item.wallet_id}}">
      <!-- åŠ¨æ€å¡ç‰‡èƒŒæ™¯æ ·å¼ -->
      <view class="post-bg" style="{{item.backgroundStyle}}"></view>
      
      <!-- ç²‰ä¸æ ‡ç­¾ -->
      <view class="fans-badge">ç²‰ä¸ {{item.fansCount}}</view>
      
      <!-- åŠ¨æ€å†…å®¹åŒºåŸŸ -->
      <view class="post-content-area">
        <!-- ç”¨æˆ·ä¿¡æ¯å’Œé‡‘é¢ -->
        <view class="post-header">
          <view class="post-title">{{item.title}}</view>
          <view class="post-amount">Â¥{{item.amount}}</view>
        </view>
        
        <!-- æ ‡ç­¾å’Œæè¿° -->
        <view class="post-tags">
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this">#{{item}}</text>
          <text class="description">{{item.description}}</text>
        </view>
        
        <!-- ç”¨æˆ·äº’åŠ¨æ¶ˆæ¯ -->
        <view class="interactions">
          <view wx:for="{{item.comments}}" wx:key="index" class="interaction-item">
            <view class="user-avatar" bindtap="navigateToUserSocialProfile" catchtap="navigateToUserSocialProfile">
              <text class="avatar-text">{{item.username.charAt(0)}}</text>
            </view>
            <view class="interaction-content">
              <text class="user-name">{{item.username}}ï¼š</text>
              <text class="message">{{item.message}}</text>
              <text wx:if="{{item.amount}}" class="amount-change">{{item.amount}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- å‚ä¸äººæ•° -->
      <view class="participants">{{item.participantCount}}äºº</view>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <view class="bottom-nav">
    <view class="nav-item" bindtap="switchTab" data-tab="wallet">
      <view class="nav-icon wallet-icon"></view>
      <text class="nav-text">é’±å…œå…œ</text>
    </view>
    <view class="nav-item active" bindtap="switchTab" data-tab="social">
      <view class="nav-icon social-icon"></view>
      <text class="nav-text">å…œåœˆåœˆ</text>
    </view>
  </view>
</view>