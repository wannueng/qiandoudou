<!--pages/user-social-profile/user-social-profile.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ä¸»è¦å†…å®¹ -->
  <view wx:else>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <view class="top-nav">
    <view class="nav-left">
      <!-- å›é€€æŒ‰é’®å·²ç§»é™¤ -->
    </view>
    <view class="nav-title">å…œåœˆåœˆä¸ªäººä¸»é¡µ</view>
    <view class="nav-right"></view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-info-section">
    <!-- ç”¨æˆ·å¤´åƒ -->
    <view class="user-avatar-container" bindtap="editProfile">
      <view class="user-avatar">
        <image wx:if="{{userInfo.hasCustomAvatar && userInfo.avatar}}" 
               class="user-avatar-image" 
               src="{{userInfo.avatar}}" 
               mode="aspectFill"/>
        <text wx:else class="avatar-text">{{firstWallet && firstWallet.name ? firstWallet.name.charAt(0) : (userInfo.nickname ? userInfo.nickname.charAt(0) : 'ç”¨')}}</text>
      </view>
    </view>

    <!-- ç”¨æˆ·æ˜µç§°å’Œæè¿° -->
    <view class="user-details">
      <text class="user-nickname">{{userInfo.nickname}}</text>
      <text class="user-description">{{userInfo.description}}</text>
    </view>

    <!-- ç¤¾äº¤ç»Ÿè®¡ -->
    <view class="social-stats">
      <view class="stat-item">
        <text class="stat-number">{{socialStats.followingCount}}</text>
        <text class="stat-label">å…³æ³¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{socialStats.fansCount}}</text>
        <text class="stat-label">ç²‰ä¸</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{socialStats.likesCount}}</text>
        <text class="stat-label">è·èµ</text>
      </view>
    </view>

    <!-- ç¼–è¾‘èµ„æ–™æŒ‰é’® -->
    <view class="edit-profile-btn" bindtap="editProfile">
      <text class="edit-text">ç¼–è¾‘èµ„æ–™</text>
    </view>
  </view>

  <!-- å…¬å¼€çš„é’±å…œå…œ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å…¬å¼€çš„é’±å…œå…œ({{publicWallets.length}})</text>
    </view>
    
    <view class="wallet-list">
      <view wx:if="{{publicWallets.length === 0}}" class="empty-state">
        <text class="empty-icon">ğŸ’¼</text>
        <text class="empty-text">è¿˜æ²¡æœ‰å…¬å¼€çš„é’±å…œå…œ</text>
      </view>
      
      <view wx:for="{{publicWallets}}" wx:key="id" 
            class="wallet-card public-wallet" 
            bindtap="onPublicWalletTap" 
            data-wallet-id="{{item.id}}">
        <!-- é’±åŒ…èƒŒæ™¯ -->
        <view class="wallet-bg" style="{{item.backgroundStyle}}">
          <!-- é’±åŒ…æ ‡é¢˜ -->
          <view class="wallet-title">{{item.title}}</view>
          
          <!-- é’±åŒ…æè¿° -->
          <view class="wallet-description">{{item.description}}</view>
          
          <!-- é’±åŒ…é‡‘é¢ -->
          <view class="wallet-amount">
            <text class="amount-symbol">Â¥</text>
            <text class="amount-number">{{item.amount}}</text>
          </view>
          
          <!-- ç¤¾äº¤ç»Ÿè®¡ -->
          <view class="wallet-social-stats">
            <view class="social-stat">
              <text class="stat-num">{{item.fansCount}}</text>
              <text class="stat-text">ç²‰ä¸</text>
            </view>
            <view class="social-stat">
              <text class="stat-num">{{item.likesCount}}</text>
              <text class="stat-text">è·èµ</text>
            </view>
            <view class="social-stat">
              <text class="stat-num">{{item.viewsCount}}</text>
              <text class="stat-text">è®¿é—®</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å…³æ³¨çš„é’±å…œå…œ -->
  <view wx:if="{{followedWallets.length > 0}}" class="section">
    <view class="section-header">
      <text class="section-title">å…³æ³¨çš„é’±å…œå…œ({{followedWallets.length}})</text>
      <view class="recent-follow" bindtap="viewRecentFollows">
        <text class="recent-text">æœ€è¿‘å…³æ³¨</text>
        <view class="arrow-icon"></view>
      </view>
    </view>
    
    <view class="followed-wallet-list">
      <view wx:for="{{followedWallets}}" wx:key="id" 
            class="followed-wallet-card" 
            bindtap="onFollowedWalletTap" 
            data-wallet-id="{{item.id}}">
        <!-- é’±åŒ…èƒŒæ™¯ -->
        <view class="followed-wallet-bg" style="{{item.backgroundStyle}}">
          <!-- å‚ä¸äººæ•°æ ‡ç­¾ -->
          <view class="followed-participant-badge">{{item.participantCount}}äºº</view>
          
          <!-- é’±åŒ…æ ‡é¢˜ -->
          <view class="followed-wallet-title">{{item.title}}</view>
          
          <!-- é’±åŒ…é‡‘é¢ -->
          <view class="followed-wallet-amount">
            <text class="followed-amount-symbol">Â¥</text>
            <text class="followed-amount-number">{{item.amount}}</text>
          </view>
          
          <!-- ç²‰ä¸æ•° -->
          <view class="followed-fans-count">ç²‰ä¸ {{item.participantCount}}</view>
        </view>
      </view>
    </view>
  </view>
  </view>
</view>
